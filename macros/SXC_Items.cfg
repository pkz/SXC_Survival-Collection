

#define SX_DEFRING X Y
  {SX_ITEM {X} {Y} "DEFRING" "items/ring-gold.png" ""}
#enddef

#define SX_DEFRING_EVENT
  [event]
    name=defring_found
    first_time_only=no
    [message]
      image=items/ring-gold.png
      speaker=narrator
      message= _ "You found a glowing little ring...
This magical ring can help you to avoid your enemies' attacks.
It increases owner's defenses for all terrains by 10%.
You can have maximum of 2 gold rings at a time.
Currently you have $defring_$side_number||"
      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP defring_$side_number less_than 2}
        [/show_if]
        message= _ "Take and use gold ring of defense"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found gold ring of defense."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
              apply_to=defense
              replace=no
              [defense]
                castle=-10
                cave=-10
                deep_water=-10
                flat=-10
                forest=-10
                frozen=-10
                fungus=-10
                hills=-10
                impassable=-10
                mountains=-10
                reef=-10
                sand=-10
                shallow_water=-10
                swamp_water=-10
                unwalkable=-10
                village=-10
              [/defense]
            [/effect]
          [/object]
          {VARIABLE_OP defring_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_DEFRING
  [option]
    message=_ {MENU_IMG_TXT "icons/ring-gold.png" "Drop gold ring of defense (you have $defring_$side_number||)"}
    [show_if]
      {SX_CMP defring_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_DEFRING $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped gold ring of defense."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
          apply_to=defense
          replace=no
          [defense]
            castle=10
            cave=10
            deep_water=10
            flat=10
            forest=10
            frozen=10
            fungus=10
            hills=10
            impassable=10
            mountains=10
            reef=10
            sand=10
            shallow_water=10
            swamp_water=10
            unwalkable=10
            village=10
          [/defense]
        [/effect]
      [/object]
      {VARIABLE_OP defring_$side_number add -1}
    [/command]
  [/option]
#enddef



#define SX_TARGET X Y
  {SX_ITEM {X} {Y} "TARGET" "items/archery-target-right.png" ""}
#enddef

#define SX_TARGET_EVENT
  [event]
    name=target_found
    first_time_only=no
    [message]
      image=items/archery-target-right.png
      speaker=narrator
      message= _ "You found the magical Diversion Creater! Its bearer receives a distracting aura, which grants a bonus of 20 percent to blade, impact, and pierce resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP target_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Target"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Target."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
              apply_to=resistance
              replace=no
              [resistance]
                blade=-20
                impact=-20
                pierce=-20
              [/resistance]
            [/effect]
          [/object]
          {VARIABLE_OP target_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_TARGET
  [option]
    message=_ {MENU_IMG_TXT "items/archery-target-right.png" "Drop Target (you have $target_$side_number||)"}
    [show_if]
      {SX_CMP target_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_TARGET $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Target."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
          apply_to=resistance
          replace=no
          [resistance]
            blade=20
            impact=20
            pierce=20
          [/resistance]
        [/effect]
      [/object]
      {VARIABLE_OP target_$side_number add -1}
    [/command]
  [/option]
#enddef



#define SX_CLOAK X Y
  {SX_ITEM {X} {Y} "CLOAK" "items/cloak-green.png" ""}
#enddef

#define SX_CLOAK_EVENT
  [event]
    name=cloak_found
    first_time_only=no
    [message]
      image=items/cloak-green.png
      speaker=narrator
      message= _ "You found a Green Cloak... This magical Cloak will reduce your Movement Costs in every Category to 1. You feel as if you were flying."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP cloak_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Clock"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Cloak."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
      apply_to=movement_costs
	 [movement_costs]
	  deep_water=-10
	  shallow_water=-10
	  swamp_water=-10
	  grassland=-10
	  sand=-10
	  forest=-10
	  hills=-10
	  mountains=-10
	  village=-10
	  castle=-10
	  cave=-10
	  tundra=-10
	  unwalkable=-10
	  fungus=-10
	 [/movement_costs]
            [/effect]
          [/object]
          {VARIABLE_OP cloak_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_CLOAK
  [option]
    message=_ {MENU_IMG_TXT "items/cloak-green.png" "Drop Cloak (you have $cloak_$side_number||)"}
    [show_if]
      {SX_CMP cloak_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_CLOAK $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Cloak."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
      apply_to=movement_costs
	 [movement_costs]
	  deep_water=10
	  shallow_water=10
	  swamp_water=10
	  grassland=10
	  sand=10
	  forest=10
	  hills=10
	  mountains=10
	  village=10
	  castle=10
	  cave=10
	  tundra=10
	  unwalkable=10
	  fungus=10
	 [/movement_costs]
        [/effect]
      [/object]
      {VARIABLE_OP cloak_$side_number add -1}
    [/command]
  [/option]
#enddef
##################



#define SX_CORNUCOPIA X Y
  {SX_ITEM {X} {Y} "CORNUCOPIA" "items/ornate2.png" ""}
#enddef

#define SX_CORNUCOPIA_EVENT
  [event]
    name=cornucopia_found
    first_time_only=no
    [message]
      image=items/ornate2.png
      speaker=narrator
      message= _ "You found the legendary Cornucopia of Fortune. Income from Kills is raised by 20 Percent."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP cornucopia_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Cornucopia"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Cornucopia."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
		{VARIABLE cornucopia 1}  	
          {VARIABLE_OP cornucopia_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_CORNUCOPIA
  [option]
    message=_ {MENU_IMG_TXT "items/ornate2.png" "Drop Cornucopia (you have $cornucopia_$side_number||)"}
    [show_if]
      {SX_CMP cornucopia_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_CORNUCOPIA $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Cornucopia."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
		{VARIABLE cornucopia 0}  	
      {VARIABLE_OP cornucopia_$side_number add -1}
    [/command]
  [/option]
#enddef
################################


#define SX_SCEPTRE X Y
  {SX_ITEM {X} {Y} "SCEPTRE" "items/sceptre-of-fire.png" ""}
#enddef

#define SX_SCEPTRE_EVENT
  [event]
    name=sceptre_found
    first_time_only=no
    [message]
      image=items/sceptre-of-fire.png
      speaker=narrator
      message= _ "You found the Ancient Sceptre of Cantar. Your damage and damage of adjacent own and allied Units as well is increased by 25 Percent."
      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP sceptre_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Sceptre"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Sceptre."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
		apply_to=new_ability
		[abilities]
	[leadership]
		id=sceptre_cantar
		value=25
		cumulative=no
		name= _ "sceptre of cantar"
description= _ "The Ancient Sceptre of Cantar:
 increases damage of self, adjacent own and allied units by 25 Percent. it is a non-cumulative leadership ability."
		affect_self=yes
		affect_allies=yes
		affect_enemies=no
		[affect_adjacent]
			adjacent=n,ne,se,s,sw,nw
		[/affect_adjacent]
	[/leadership]
		[/abilities]
            [/effect]
          [/object]
          {VARIABLE_OP sceptre_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_SCEPTRE
  [option]
    message=_ {MENU_IMG_TXT "items/sceptre-of-fire.png" "Drop Sceptre (you have $sceptre_$side_number||)"}
    [show_if]
      {SX_CMP sceptre_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_SCEPTRE $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Sceptre."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
     apply_to=remove_ability
    [abilities]
      [dummy]
        id=sceptre_cantar
      [/dummy]
    [/abilities]
        [/effect]
      [/object]
      {VARIABLE_OP sceptre_$side_number add -1}
    [/command]
  [/option]
#enddef
###################################


#define SX_SWORD X Y
  {SX_ITEM {X} {Y} "SWORD" "items/flame-sword.png" ""}
#enddef

#define SX_SWORD_EVENT
  [event]
    name=sword_found
    first_time_only=no
    [message]
      image=items/flame-sword.png
      speaker=narrator
      message= _ "You found the Holy Sword of the Crusader. Your damage and damage of adjacent own and allied Units as well is increased by 25 Percent."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP sword_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Sword"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Sword."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
 		apply_to=new_ability
		[abilities]
	[leadership]
		id=sword_crusader
		value=25
		cumulative=no
		name= _ "sword of the crusader"
description= _ "The Holy Sword of the Crusader:
 increases damage of self, adjacent own and allied units by 25 Percent. it is a non-cumulative leadership ability."
		affect_self=yes
		affect_allies=yes
		affect_enemies=no
		[affect_adjacent]
			adjacent=n,ne,se,s,sw,nw
		[/affect_adjacent]
	[/leadership]
		[/abilities]
            [/effect]
          [/object]
          {VARIABLE_OP sword_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_SWORD
  [option]
    message=_ {MENU_IMG_TXT "items/flame-sword.png" "Drop Sword (you have $sword_$side_number||)"}
    [show_if]
      {SX_CMP sword_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_SWORD $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Sword."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
      apply_to=remove_ability
    [abilities]
      [dummy]
        id=sword_crusader
      [/dummy]
    [/abilities]
        [/effect]
      [/object]
      {VARIABLE_OP sword_$side_number add -1}
    [/command]
  [/option]
#enddef
###################################


#define SX_BOW X Y
  {SX_ITEM {X} {Y} "BOW" "items/bow-elven.png" ""}
#enddef

#define SX_BOW_EVENT
  [event]
    name=bow_found
    first_time_only=no
    [message]
      image=items/bow-elven.png
      speaker=narrator
      message= _ "You found the Crystal Bow of the Hunter. Your damage and damage of adjacent own and allied Units as well is increased by 25 Percent."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP bow_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Bow"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Bow."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
 		apply_to=new_ability
		[abilities]
	[leadership]
		id=crystal_bow
		value=25
		cumulative=no
		name= _ "bow of the hunter"
description= _ "Crystal Bow of the Hunter:
 increases damage of self, adjacent own and allied units by 25 Percent. it is a non-cumulative leadership ability."
		affect_self=yes
		affect_allies=yes
		affect_enemies=no
		[affect_adjacent]
			adjacent=n,ne,se,s,sw,nw
		[/affect_adjacent]
	[/leadership]
		[/abilities]
            [/effect]
          [/object]
          {VARIABLE_OP bow_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_BOW
  [option]
    message=_ {MENU_IMG_TXT "items/bow-elven.png" "Drop Bow (you have $bow_$side_number||)"}
    [show_if]
      {SX_CMP bow_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_BOW $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Bow."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
      apply_to=remove_ability
    [abilities]
      [dummy]
        id=crystal_bow
      [/dummy]
    [/abilities]
        [/effect]
      [/object]
      {VARIABLE_OP bow_$side_number add -1}
    [/command]
  [/option]
#enddef
##################################


#define SX_NECKLACE X Y
  {SX_ITEM {X} {Y} "NECKLACE" "items/ankh-necklace.png" ""}
#enddef

#define SX_NECKLACE_EVENT
  [event]
    name=necklace_found
    first_time_only=no
    [message]
      image=items/ankh-necklace.png
      speaker=narrator
      message= _ "You found the Silver Necklace of Protection. Its bearer receives a Circle of Protection, which grants a bonus of 20 percent to fire, cold and arcane resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP necklace_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Necklace"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Necklace."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
	apply_to=resistance
	replace=no
	  [resistance]
	  fire=-20
	  cold=-20
	  arcane=-20
	  [/resistance]
            [/effect]
          [/object]
          {VARIABLE_OP necklace_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_NECKLACE
  [option]
    message=_ {MENU_IMG_TXT "items/ankh-necklace.png" "Drop Necklace (you have $necklace_$side_number||)"}
    [show_if]
      {SX_CMP necklace_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_NECKLACE $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Necklace."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
	apply_to=resistance
	replace=no
	  [resistance]
	  fire=20
	  cold=20
	  arcane=20
	  [/resistance]
        [/effect]
      [/object]
      {VARIABLE_OP necklace_$side_number add -1}
    [/command]
  [/option]
#enddef
#################################


#define SX_ICEARMOR X Y
  {SX_ITEM {X} {Y} "ICEARMOR" "items/armor.png" ""}
#enddef

#define SX_ICEARMOR_EVENT
  [event]
    name=icearmor_found
    first_time_only=no
    [message]
      image=items/armor.png
      speaker=narrator
      message= _ "You found the legendary Ice Armor. Its bearer recieves a bonus of 20 percent to cold resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP icearmor_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Ice Armor"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Ice Armor."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
              apply_to=resistance
              replace=no
              [resistance]
                cold=-20
              [/resistance]
            [/effect]
          [/object]
          {VARIABLE_OP icearmor_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_ICEARMOR
  [option]
    message=_ {MENU_IMG_TXT "items/armor.png" "Drop Ice Armor (you have $icearmor_$side_number||)"}
    [show_if]
      {SX_CMP icearmor_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_ICEARMOR $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Ice Armor."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
          apply_to=resistance
          replace=no
          [resistance]
            cold=20
          [/resistance]
        [/effect]
      [/object]
      {VARIABLE_OP icearmor_$side_number add -1}
    [/command]
  [/option]
#enddef
####################################


#define SX_FIREARMOR X Y
  {SX_ITEM {X} {Y} "FIREARMOR" "items/armor-golden.png" ""}
#enddef

#define SX_FIREARMOR_EVENT
  [event]
    name=firearmor_found
    first_time_only=no
    [message]
      image=items/armor-golden.png
      speaker=narrator
      message= _ "You found the magical Diversion Creater! Its bearer receives a distracting aura, which grants a bonus of 20 percent to blade, impact, and pierce resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP firearmor_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use FireArmor"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found FireArmor."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
              apply_to=resistance
              replace=no
              [resistance]
	  fire=-20
              [/resistance]
            [/effect]
          [/object]
          {VARIABLE_OP firearmor_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_FIREARMOR
  [option]
    message=_ {MENU_IMG_TXT "items/armor-golden.png" "Drop FireArmor (you have $firearmor_$side_number||)"}
    [show_if]
      {SX_CMP firearmor_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_FIREARMOR $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the FireArmor."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
          apply_to=resistance
          replace=no
          [resistance]
	  fire=20
          [/resistance]
        [/effect]
      [/object]
      {VARIABLE_OP firearmor_$side_number add -1}
    [/command]
  [/option]
#enddef
###################################


#define SX_SPIRITSTAFF X Y
  {SX_ITEM {X} {Y} "SPIRITSTAFF" "items/staff.png" ""}
#enddef

#define SX_SPIRITSTAFF_EVENT
  [event]
    name=spiritstaff_found
    first_time_only=no
    [message]
      image=items/staff.png
      speaker=narrator
      message= _ "You found the magical Diversion Creater! Its bearer receives a distracting aura, which grants a bonus of 20 percent to blade, impact, and pierce resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP spiritstaff_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Spirit Staff"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Spirit Staff."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
              apply_to=resistance
              replace=no
              [resistance]
 	  arcane=-20
              [/resistance]
            [/effect]
          [/object]
          {VARIABLE_OP spiritstaff_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_SPIRITSTAFF
  [option]
    message=_ {MENU_IMG_TXT "items/staff.png" "Drop Spirit Staff (you have $spiritstaff_$side_number||)"}
    [show_if]
      {SX_CMP spiritstaff_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_SPIRITSTAFF $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Spirit Staff."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
          apply_to=resistance
          replace=no
          [resistance]
 	  arcane=20
          [/resistance]
        [/effect]
      [/object]
      {VARIABLE_OP spiritstaff_$side_number add -1}
    [/command]
  [/option]
#enddef
#############################


#define SX_BUCKLER X Y
  {SX_ITEM {X} {Y} "BUCKLER" "items/buckler.png" ""}
#enddef

#define SX_BUCKLER_EVENT
  [event]
    name=buckler_found
    first_time_only=no
    [message]
      image=items/buckler.png
      speaker=narrator
      message= _ "You found the incredible Dragonbone Shield. Its bearer recieves a bonus of 20 percent to blade resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP buckler_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Dragonbone Shield"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Dragonbone Shield."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
              apply_to=resistance
              replace=no
              [resistance]
                blade=-20
                impact=-20
                pierce=-20
              [/resistance]
            [/effect]
          [/object]
          {VARIABLE_OP buckler_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_BUCKLER
  [option]
    message=_ {MENU_IMG_TXT "items/buckler.png" "Drop Dragonbone Shield (you have $buckler_$side_number||)"}
    [show_if]
      {SX_CMP buckler_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_BUCKLER $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Dragonbone Shield."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
          apply_to=resistance
          replace=no
          [resistance]
            blade=20
            impact=20
            pierce=20
          [/resistance]
        [/effect]
      [/object]
      {VARIABLE_OP buckler_$side_number add -1}
    [/command]
  [/option]
#enddef
#################################

#define SX_BARREL X Y
  {SX_ITEM {X} {Y} "BARREL" "items/barrel.png" ""}
#enddef

#define SX_BARREL_EVENT
  [event]
    name=barrel_found
    first_time_only=no
    [message]
      image=items/barrel.png
      speaker=narrator
      message= _ "You found the mythical Barrel of Power. Its bearer recieves a bonus of 20 percent to pierce resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP barrel_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Barrel of Power"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Barrel of Power."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
              apply_to=resistance
              replace=no
              [resistance]
	  pierce=-20
              [/resistance]
            [/effect]
          [/object]
          {VARIABLE_OP barrel_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_BARREL
  [option]
    message=_ {MENU_IMG_TXT "items/barrel.png" "Drop Barrel of Power (you have $barrel_$side_number||)"}
    [show_if]
      {SX_CMP barrel_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_BARREL $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Barrel of Power."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
          apply_to=resistance
          replace=no
          [resistance]
	  pierce=20
          [/resistance]
        [/effect]
      [/object]
      {VARIABLE_OP barrel_$side_number add -1}
    [/command]
  [/option]
#enddef


######################


#define SX_DWARFPLATE X Y
  {SX_ITEM {X} {Y} "DWARFPLATE" "items/dummy.png" ""}
#enddef

#define SX_DWARFPLATE_EVENT
  [event]
    name=dwarvishplate_found
    first_time_only=no
    [message]
      image=items/dummy.png
      speaker=narrator
      message= _ "You found the Dwarvish Plate. Its bearer recieves a bonus of 20 percent to impact resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP dwarvishplate_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Dwarvish Plate"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Dwarvish Plate."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
              apply_to=resistance
              replace=no
              [resistance]
	  impact=-20
              [/resistance]
            [/effect]
          [/object]
          {VARIABLE_OP dwarvishplate_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_DWARFPLATE
  [option]
    message=_ {MENU_IMG_TXT "items/dummy.png" "Drop Dwarvish Plate (you have $dwarvishplate_$side_number||)"}
    [show_if]
      {SX_CMP dwarvishplate_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_DWARFPLATE $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Dwarvish Plate."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
          apply_to=resistance
          replace=no
          [resistance]
 	  impact=20
          [/resistance]
        [/effect]
      [/object]
      {VARIABLE_OP dwarvishplate_$side_number add -1}
    [/command]
  [/option]
#enddef


############################


#define SX_RINGDARKNESS X Y
  {SX_ITEM {X} {Y} "RINGDARKNESS" "items/ring-red.png" ""}
#enddef

#define SX_RINGDARKNESS_EVENT
  [event]
    name=ringofdarkness_found
    first_time_only=no
    [message]
      image=items/ring-red.png
      speaker=narrator
      message= _ "You found the magical Diversion Creater! Its bearer receives a distracting aura, which grants a bonus of 20 percent to blade, impact, and pierce resistance."

      [option]
        message= _ "I'll leave it for another player"
        [command]
        [/command]
      [/option]
      [option]
        [show_if]
          {SX_CMP ringofdarkness_$side_number less_than 1}
        [/show_if]
        message= _ "Take and use Ring of Darkness"
        [command]
          [sound]
            name=magic-holy-1.ogg
          [/sound]
          [print]
            text= _ "Player $side_number| found Ring of Darkness."
            size=18
            duration=500
            red,green,blue=255,255,0
          [/print]
          [object]
            silent=yes
            duration=forever
            [effect]
		apply_to=new_ability
		[abilities]
	[leadership]
		id=ringdarkness
		value=-25
		cumulative=no
		name= _ "ring of darkness"
		description= _ "Ring of Darkness makes all adjacent enemy units fight worse (-25% for attack)."
		affect_self=no
		affect_allies=no
		affect_enemies=yes
		[affect_adjacent]
			adjacent=n,ne,se,s,sw,nw
		[/affect_adjacent]
	[/leadership]
		[/abilities]
            [/effect]
          [/object]
          {VARIABLE_OP ringofdarkness_$side_number add 1}
          {VARIABLE item[$item_index|].used 1}
          {SX_REDRAW_ITEMS $item[$item_index|].x $item[$item_index|].y}
        [/command]
      [/option]
        image=wesnoth-icon.png
    [/message]
  [/event]
#enddef

#define SX_DROP_RINGDARKNESS
  [option]
    message=_ {MENU_IMG_TXT "items/ring-red.png" "Drop Ring of Darkness (you have $ringofdarkness_$side_number||)"}
    [show_if]
      {SX_CMP ringofdarkness_$side_number greater_than_equal_to 1}
    [/show_if]
    [command]
      {SX_RINGDARKNESS $x1 $y1}
      [print]
        text= _ "Player $side_number| dropped the Ring of Darkness."
        size=18
        duration=500
        red,green,blue=255,255,0
      [/print]
      [object]
        silent=yes
        duration=forever
        [effect]
      apply_to=remove_ability
    [abilities]
      [dummy]
        id=ringdarkness
      [/dummy]
    [/abilities]
        [/effect]
      [/object]
      {VARIABLE_OP ringofdarkness_$side_number add -1}
    [/command]
  [/option]
#enddef



